<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.71/jquery.csv-0.71.min.js"></script>

<script type="text/javascript">

  var dat0;
  var dat1 = [];

  $(document).ready(function() {

    d3.text('/data/miscellaneous_data/season2015.csv', function(data){
      dat0 = d3.csv.parseRows(data);
      dat0 = dat0.filter(function(el, index) {
        return index % 2 === 0;
      });
    
      for (var i=0; i < dat0.length; i++){
        dat1[i] = dat0[i][0];
      }
      for (var i=0; i < dat0.length; i++){
        dat1[i] = dat1[i].slice(0, 2) + " " + dat1[i].slice(2);
      }
      stats = dat1;

      var substringMatcher = function(strs) {
        return function findMatches(q, cb) {
          var matches, substringRegex;
          matches = [];
          substrRegex = new RegExp(q, 'i');
          $.each(strs, function(i, str) {
            if (substrRegex.test(str)) {
              matches.push(str);
            }
          });
          cb(matches);
        };
      };

      $('#the-basics .typeahead').typeahead({
        hint: true,
        highlight: true,
        minLength: 1
      },
      {
        name: 'dat1',
        source: substringMatcher(dat1)
      });


    })

  }); 


  function searchPlayer() {

    var x = document.getElementById("player").value;
    for (var i=0; i<dat1.length; i++){
      if (dat1[i] == x)
      {

        var string;

        if (dat0[i][4] == "QB"){
          string = dat0[i][0] + " " + dat0[i][3] + " " + dat0[i][4] + " ATT: " + dat0[i][29] + " CMP: " + dat0[i][30] + " INT: " + dat0[i][31] + " PASS TD: " + dat0[i][32] + " PASS TWO PT ATT: " + dat0[i][33] + " PASS TWO PT MADE: " + dat0[i][34] + " PASS YDS: " + dat0[i][35];
        }
        else if (dat0[i][4] == "RB"){
          string = dat0[i][0] + " " + dat0[i][3] + " " + dat0[i][4] + " RUSH ATT: " + dat0[i][53] + " RUSH LNG: " + dat0[i][54] + " RUSH LNG TD: " + dat0[i][55] + " RUSH TD: " + dat0[i][56] + " RUSH TWO PT ATT: " + dat0[i][57] + " RUSH TWO PT MADE: " + dat0[i][58] + " RUSH YDS: " + dat0[i][59] + " KR AVG: " + dat0[i][24] + " KR LNG: " + dat0[i][25] + " KR LNG TD: " + dat0[i][26] + " KR RET: " + dat0[i][27] + " KR TD: " + dat0[i][28] + " PR AVG: " + dat0[i][41] + " PR LNG: " + dat0[i][42] + " KR LNG TD: " + dat0[i][43] + " PR RET: " + dat0[i][44] + " PR TD: " + dat0[i][45];
        }
        else if (dat0[i][4] == "WR"){
          string = dat0[i][0] + " " + dat0[i][3] + " " + dat0[i][4] + " REC LNG: " + dat0[i][46] + " REC LNG TD: " + dat0[i][47] + " REC REC: " + dat0[i][48] + " REC TD: " + dat0[i][49] + " REC TWO PT ATT: " + dat0[i][50] + " REC TWO PT MADE: " + dat0[i][51] + " REC YDS: " + dat0[i][52] + " KR AVG: " + dat0[i][24] + " KR LNG: " + dat0[i][25] + " KR LNG TD: " + dat0[i][26] + " KR RET: " + dat0[i][27] + " KR TD: " + dat0[i][28] + " PR AVG: " + dat0[i][41] + " PR LNG: " + dat0[i][42] + " KR LNG TD: " + dat0[i][43] + " PR RET: " + dat0[i][44] + " PR TD: " + dat0[i][45];
        }
        else if (dat0[i][4] == "K"){
          string = dat0[i][0] + " " + dat0[i][3] + " " + dat0[i][4] + " " + " FGA: " +  dat0[i][15] + " FGM: " + dat0[i][16] + " FG YDS: " + dat0[i][17] + " FG TOT PTS: " + dat0[i][18] + " XPA: " + dat0[i][19] + " XPB: " + dat0[i][20] + " XP MADE: " + dat0[i][21] + " XP MISSED: " + dat0[i][22] + " XP TOT: " + dat0[i][23];
        }
        else if (dat0[i][4] == "P"){
          string = dat0[i][0] + " " + dat0[i][3] + " " + dat0[i][4] + " PUNT AVG: " + dat0[i][36] + " PUNT I20: " + dat0[i][37] + " PUNT LNG: " + dat0[i][38] + " PUNT PTS: " + dat0[i][39] + " PUNT YDS: " + dat0[i][40];
        }
        else{
          string = dat0[i][0] + " " + dat0[i][3] + " " + dat0[i][4] + " AST: " + dat0[i][5] + " FFUM: " + dat0[i][6] + " INT: " + dat0[i][7] + " SCK: " + dat0[i][8] + " TKL: " + dat0[i][9] + " FUMBLES LOST: " + dat0[i][10] + " FUMBLES RCV: " + dat0[i][11] + " FUMBLES TOT: " + dat0[i][12] + " FUMBLES TRCV: " + dat0[i][13] + " FUMBLE YDS: " + dat0[i][14] + " KR AVG: " + dat0[i][24] + " KR LNG: " + dat0[i][25] + " KR LNG TD: " + dat0[i][26] + " KR RET: " + dat0[i][27] + " KR TD: " + dat0[i][28] + " PR AVG: " + dat0[i][41] + " PR LNG: " + dat0[i][42] + " KR LNG TD: " + dat0[i][43] + " PR RET: " + dat0[i][44] + " PR TD: " + dat0[i][45];
        }

/*         = dat0[i][0] + " " + dat0[i][3] + " " + dat0[i][4] + " AST: " + dat0[i][5] + " FFUM: " + dat0[i][6] + " INT: " + dat0[i][7] + " SCK: " + dat0[i][8] + " TKL: " + dat0[i][9] + " FUMBLES LOST: " + dat0[i][10] + " FUMBLES RCV: " + dat0[i][11] + " FUMBLES TOT: " + dat0[i][12] + " FUMBLES TRCV: " + dat0[i][13] + " FUMBLE YDS: " + dat0[i][14] + " FGA: " + dat0[i][15] + " FGM: " + dat0[i][16] + " FG YDS: " + dat0[i][17] + " FG TOT PTS: " + dat0[i][18] + " XPA: " + dat0[i][19] + " XPB: " + dat0[i][20] + " XP MADE: " + dat0[i][21] + " XP MISSED: " + dat0[i][22] + " XP TOT: " + dat0[i][23] + " KR AVG: " + dat0[i][24] + " KR LNG: " + dat0[i][25] + " KR LNG TD: " + dat0[i][26] + " KR RET: " + dat0[i][27] + " KR TD: " + dat0[i][28] + " ATT: " + dat0[i][29] + " CMP: " + dat0[i][30] + " INT: " + dat0[i][31] + " PASS TD: " + dat0[i][32] + " PASS TWO PT ATT: " + dat0[i][33] + " PASS TWO PT MADE: " + dat0[i][34] + " PASS YDS: " + dat0[i][35] + " PUNT AVG: " + dat0[i][36] + " PUNT I20: " + dat0[i][37] + " PUNT LNG: " + dat0[i][38] + " PUNT PTS: " + dat0[i][39] + " PUNT YDS: " + dat0[i][40] + " PR AVG: " + dat0[i][41] + " PR LNG: " + dat0[i][42] + " KR LNG TD: " + dat0[i][43] + " PR RET: " + dat0[i][44] + " PR TD: " + dat0[i][45] + " REC LNG: " + dat0[i][46] + " REC LNG TD: " + dat0[i][47] + " REC REC: " + dat0[i][48] + " REC TD: " + dat0[i][49] + " REC TWO PT ATT: " + dat0[i][50] + " REC TWO PT MADE: " + dat0[i][51] + " REC YDS: " + dat0[i][52] + " RUSH ATT: " + dat0[i][53] + " RUSH LNG: " + dat0[i][54] + " RUSH LNG TD: " + dat0[i][55] + " RUSH TD: " + dat0[i][56] + " RUSH TWO PT ATT: " + dat0[i][57] + " RUSH TWO PT MADE: " + dat0[i][58] + " RUSH YDS: " + dat0[i][59];
*/
        document.getElementById("displayData").innerHTML = string;

      }
    }

  }

</script>

<div id="the-basics" class="input-group" style="margin:auto">
    <input class="typeahead" type="text" id="player" placeholder="Search" style="height: 34px; color:white; border-color:white; border-top-right-radius: 0px; border-bottom-right-radius: 0px;">
    <button type="button" class="btn btn-primary" style="height:34px; width:40px; vertical-align:top; border-top-left-radius: 0px; border-bottom-left-radius: 0px;" onclick="searchPlayer()">
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
    </button>
    <div style="color:white" id="displayData"></div>
</div>

